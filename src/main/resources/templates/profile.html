<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
	<head>
		<meta charset="UTF-8">
		<title>HelloHome! - Profile</title>
		<link
		 href="https://stackpath.bootstrapcdn.com/bootswatch/4.3.1/lux/bootstrap.min.css"
		 rel="stylesheet"
		 integrity="sha384-hVpXlpdRmJ+uXGwD5W6HZMnR9ENcKVRn855pPbuI/mwPIEKAuKgTKgGksVGmlAvt"
		 crossorigin="anonymous"
		>
		<link href="/styles.css" rel="stylesheet">
	</head>
	<body>
		<div th:replace="fragments/header :: loggedInHeader(user=${currentUser})"></div>
		<main class="container">
			<h1>Profile</h1>
			
			<div th:if="${currentUser.expense == null}">
				<p><a href="/user/addExpenses">Add expense information</a></p>
			</div>
			
			<div th:unless="${currentUser.expense == null}">
				<p><a href="/user/addExpenses">Update Profile</a></p>
				
				<ul class="list-group list-group-flush">
					<li class="list-group-item"><b>Username:</b> <span th:text="${currentUser.username}"></span></li>
					<li class="list-group-item"><b>First Name:</b> <span th:text="${currentUser.firstName}"></span></li>
					<li class="list-group-item"><b>Last Name:</b> <span th:text="${currentUser.lastName}"></span></li>
					<li class="list-group-item"><b>Annual Income:</b> $
						<span th:text="${currentUser.expense.annualIncome}"></span>
					</li>
					<li class="list-group-item">
						<b>Monthly Expenses:</b>
						<ul style="list-style-type: none">
							<li><b>House Payment:</b> $
								<span th:text="${currentUser.expense.housePayment}"></span></li>
							<li><b>Entertainment Payment:</b> $
								<span th:text="${currentUser.expense.entertainment}"></span></li>
							<li><b>Utilities Payment:</b> $
								<span th:text="${currentUser.expense.utilities}"></span></li>
							<li><b>Insurance Payment:</b> $
								<span th:text="${currentUser.expense.insurance}"></span></li>
							<li><b>Vehicle Payment:</b> $
								<span th:text="${currentUser.expense.vehicle}"></span></li>
							<li><b>Misc Payment:</b> $<span th:text="${currentUser.expense.misc}"></span></li>
						</ul>
					</li>
          <li class="list-group-item">
					<b>Mortgage Budget</b>
					<ul style="list-style-type: none">
						<li><b>Monthly Mortgage Budget</b> $
							<span th:text="${currentUser.monthlyMortgageBudget}"></span></li>
						<li><b>Total Mortgage Budget</b> $
							<span th:text="${currentUser.totalAffortableMortgage}"></span></li>
					</ul>

				</li>
					<li th:if="${currentUser.searches.size() != 0}" class="list-group-item">
						<b>Past Searches:</b>
						<ul th:each="search : ${currentUser.searches}" style="list-style-type: none">
							<li>
								<form method="POST" action="/user/results">
									<input type="hidden" name="city" id="city" th:value="${search.city}" />
									<input type="hidden" name="state" id="state" th:value="${search.state}" />
									<button type="submit" class="link-like">
										<span th:text="${search.city} + ', ' + ${search.state}"></span>
									</button>
								</form>
							</li>
						</ul>
					</li>
				</ul>
			</div>
		</main>
	</body>
</html>